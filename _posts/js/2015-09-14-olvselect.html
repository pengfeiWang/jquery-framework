---
layout: article
title: 下拉菜单
categories: doc_js
---
<h3> 下拉菜单 </h3>
<p>
    <strong>path:</strong> lib/jquery-plugins/olvSelect.js
</p>
<blockquote>
    <p>
        下拉菜单, 下拉选项自动计算弹出方向,
    </p>
</blockquote>
<style>
  h2, h3, h4, h5, h6 {
    padding: 10px 0;
  }
  select{
    font-size: 14px;
    padding: 5px;
    width: 200px;
    height: 100px;
  }
</style>
<div class="select-box">
<h2> 单选下拉菜单 </h2>
<select data-test="init">
  <option selected>默认选中的选项1</option>
  <option value="选项2" disabled>禁用的选项2</option>
  <option value="选项3">选项3</option>
  <option value="选项4">选项4</option>
  <optgroup label="开发">
      <option value="前端开发">前端开发</option>
      <option value="后端开发">后端开发</option>
  </optgroup>
</select>
<span class="bk bk10"></span>
<h2> 多选下拉菜单 </h2>
<select  multiple="multiple"  data-test="init">
  <option value="选项1" >选项1</option>
  <option value="选项2" selected="" disabled="">选项2</option>
  <option value="选项3" selected="">选项3</option>
  <option value="选项4">选项4</option>
  <optgroup label="分组">
      <option value="前端开发">前端开发</option>
      <option value="后端开发">后端开发</option>
  </optgroup>
</select>
<span class="bk bk10"></span>
<h4> 初始化 </h4>
{% highlight javascript %}
$('select').olvSelect();
{% endhighlight %}
<h4>默认配置参数</h4>
{% highlight javascript %}
defaultOps = {
  width: '',  // 自定义宽度
  height: '', // 自定义高度
  customClass: '', // 自定义 class
  placeholder: '', // 提示文字
  popdir: '', // left right up down 强制弹出方向只支持 'top' 'bottom', 
  before: noop, // 初始化完成的回调
  open:   noop, // open 回调
  close:  noop, // close 回调
  change: noop  // change 回调
}
{% endhighlight%}
</div>
<h2> 进阶使用 </h4>
  <select multiple="multiple"  data-g="init">
    <option value="选项1" >选项1</option>
    <option value="选项2" selected="" disabled="">选项2</option>
    <option value="选项3" selected="">选项3</option>
    <option value="选项4">选项4</option>
    <optgroup label="分组">
        <option value="前端开发">前端开发</option>
        <option value="后端开发">后端开发</option>
    </optgroup>
  </select>
  <h5> 程序调用 显示/隐藏/初始/重置/销毁/变化 </h5>
  <button type="button" class="btn btn-warning-border" data-type="open">显示</button>
  <button type="button" class="btn btn-warning-border" data-type="close">关闭</button>
  <button type="button" class="btn btn-warning-border" data-type="init">初始</button>
  <button type="button" class="btn btn-warning-border" data-type="restart">重置</button>
  <button type="button" class="btn btn-warning-border" data-type="destroy">销毁</button>
  <button type="button" class="btn btn-warning-border" data-type="change">变化</button>
<span class="bk bk10"></span>
{% highlight javascript %}
/* 显示 通过传递参数 或者触发事件 */
$('select').olvSelect('open');
$('select').trigger('olvselect.open');
/* ===== */
$('select').olvSelect('close');
$('select').trigger('olvselect.close');
/* 调用销毁后, 所有事件均销毁, 以及调用程序所产生的元素 */
/* 调用重置, 所有数据将恢复原始 */
/* 调用变化, 对应的回调会执行 */
/*
如果通过 click 按钮来"显示/隐藏"的话需要 e.stopPropagation(); 阻止按钮冒泡
*/
{% endhighlight %}
<h2> 进阶使用, 动态添加数据 </h2>
  <select  multiple="multiple"  data-add>
    <option value="选项1" >选项1</option>
    <option value="选项2" selected="" disabled="">选项2</option>
    <option value="选项3" selected="">选项3</option>
    <option value="选项4">选项4</option>
    <optgroup label="分组">
        <option value="前端开发">前端开发</option>
        <option value="后端开发">后端开发</option>
    </optgroup>
  </select>
  <span class="bk bk10"></span>
  <button type="button" class="btn btn-warning-border" data-add="line">增加一行</button>
  <button type="button" class="btn btn-warning-border" data-add="group">增加一组</button>
  <span class="bk bk10"></span>
{% highlight javascript %}
/* 重复的数据不在添加 */
var lineData = [{
  txt: '新增单行txt',
  val: '新增单行val'
}]
var groupData = [{
  group: '组名',
  option: [
    {
      txt: '新增组1txt',
      val: '新增组1val',
      selected: 1
    },
    {
      txt: '新增组2txt',
      val: '新增组2val'
    }
  ]
}];
addSelect.olvselect('add', lineData);
addSelect.olvselect('add', groupData);
{% endhighlight %}
<h4> olvSelect 提供的事件 </h4>
{% highlight javascript %}
// 调用事件前提需要调用程序, $('select').olvSelect() , 而传递参数形式不受此限制
// 调用事件 $('select').trigger('olvselect.restart')
olvselect.open
olvselect.close
olvselect.destroy
olvselect.restart
olvselect.change
{% endhighlight %}

<h4> olvSelect 可接受的参数 </h4>
{% highlight javascript %}
$('select').olvSelect('open');
init
open
close
destroy
restart
change
{% endhighlight %}
{% raw %}
<script>
seajs.use(['olvDialog','olvSelect'], function ( $ ) {
  var select = $('select[data-test]');
  var select2 = $('select[data-g]');
  var addSelect = $('select[data-add]')
  var btn = $('.btn[data-type]');
  var addBtn = $('.btn[data-add]');
  var lineData = [{
    txt: '新增单行txt',
    val: '新增单行val'
  }]
  var groupData = [{
    group: '组名',
    option: [
      {
        txt: '新增组1txt',
        val: '新增组1val',
        selected: 1
      },
      {
        txt: '新增组2txt',
        val: '新增组2val'
      }
    ]
  }]
  select.olvSelect();
  addSelect.olvSelect();
  btn.click(function ( e ) {
    e.stopPropagation();
    select2.olvSelect( $(this).attr('data-type') );
  });
  addBtn.click(function (e) {
    e.stopPropagation();
    var _this = $(this);
    var attr = _this.attr('data-add');
    if( attr == 'line' ) {
      addSelect.olvSelect('add', lineData)
    } else {
      addSelect.olvSelect('add', groupData)
    }
  });
});
</script>
{% endraw %}